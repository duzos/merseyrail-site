<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title></title>
    <link rel="stylesheet" href="style.css" />
</head>
<body>
    <img id="segment" src="img/header.png", alt="Merseyrail text">
    <div class="blank-block"></div>
    <img id="segment" src="img/station.png", alt="Merseyrail station">
    <img id="train" src="img/777.png" alt="777 Class Train"/>
    <script>
        const moveDuration = 10000; // ms
        const pauseDuration = 15000; // ms

        function setClass(train, className) {
            train.className = className;
        }

        let is777 = true;

        function swapImage(train) {
            is777 = !is777;
            train.src = is777 ? 'img/777.png' : 'img/507.png';
            train.alt = is777 ? '777 Class Train' : '507 Class Train';
        }

        function animateTrain(train, delay = 0) {
            setTimeout(() => {
                // Swap image every time it moves to the right
                swapImage(train);
                setClass(train, 'right');
                setTimeout(() => {
                    setClass(train, 'center');
                    setTimeout(() => {
                        setClass(train, 'left');
                        setTimeout(() => {
                            // Swap image again when returning to right
                            setClass(train, 'right');
                            animateTrain(train, 0);
                        }, moveDuration);
                    }, pauseDuration);
                }, 100);
            }, delay);
        }

        animateTrain(document.getElementById('train'))
    </script>
</body>
</html>